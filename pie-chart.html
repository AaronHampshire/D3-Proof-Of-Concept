<html>
<head>
  <script src="resrc/d3.js" charset="utf-8"></script>
  <script src="resrc/jquery.js" charset="utf-8"></script>
  <link rel="stylesheet" href="resrc/bootstrap/css/bootstrap.min.css">
  <script>
    // The following dataset would be brought in through react API call.
    var dataset  = [
        { label: 'Mortgage', value: 10 },
        { label: 'Walkability', value: 20 },
        { label: 'Nearby Parks', value: 30 },
        { label: 'Commute', value: 40 }
      ];
  </script>
  <style>
    
    svg{
      display: block;
      margin: auto;
      width: 100%;
    }
    
    body{
      margin : 10 50px;
      height : 100%;
    }
    
    div{
      padding: 10px 0;
    }
    h1{
      padding: 0 0 0 15px;
    }
    
  </style>
</head>

<body>
  
  <div class="row" >
    <h1>D3.js Pie Chart Demo</h1>
    <div class="col-md-4">
      <h4>Random</h4>
      lkajs dlfkja sdlfkja sldfkja sldfkja sdflkasjdf alskdjf alskdjf alskdj lkasjd flkajsd flkasjd flaksjdf laksjdf laksjd flaksjd flasdkfa skd fkskdf sdf laskjdf laksjd flkajsd flkajs dflkajs dflkjas dflkjas ldkfj aslkdfj alskdjf alksdjf alksdjf adsf</div>
    <div class="col-md-5" id="chart-container"><div id="chart"></div></div>
    <div class="col-md-3" >
      <h4>Key</h4>
      asdfasdfalskdfjal skdjf laksjdf laksjd flkasjd f
      asdf as;dfkjasdlfk jdasf
    </div>
  </div>
  <script>
    // Pie Chart
    var divWidth = document.getElementById("chart-container").offsetWidth*0.9;
        var width = divWidth < 500 ? divWidth : 500;
    var height = width;
    var radius = Math.min(width, height) / 2;
    var color = d3.scale.category20();

    var svg = d3.select('#chart')
      .append('svg')
      .attr('width', width)
      .attr('height', height)
      .append('g')
      .attr('transform', 'translate(' + (width/2) + ',' + (height / 2) + ')');
      
    var arc = d3.svg.arc()
      .outerRadius(radius)
      .innerRadius(0);
                
    var pie = d3.layout.pie()
      .value(function(d) {return d.value;})
      .sort(null);
                
    var path = svg.selectAll('path')
      .data(pie(dataset))
      .enter()
      .append('path')
      .attr('d', arc)
      .attr('fill', function(d, i) {
        return color(d.data.label)
      });
    
    // Dynamic Chart Sizing
    function updateWindow(){
        var divWidth = document.getElementById("chart-container").offsetWidth*0.9;
        var width = divWidth < 500 ? divWidth : 500;
        var height = width;
        var radius = Math.min(width, height) / 2;
        svg.attr("width", width).attr("height", height).attr('transform', 'translate(' + (width/2) + ',' + (height / 2) + ')');
        arc.outerRadius(radius);
        path.attr('d', arc);
        $('body').css("min-height", width + 200); //better way to find 200
        $('#body-container').css("height", width);
        $('svg').css("height", width);
    }
    window.onresize = updateWindow;
  </script>
</body>
</html>